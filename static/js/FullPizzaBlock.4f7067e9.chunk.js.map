{"version":3,"file":"static/js/FullPizzaBlock.4f7067e9.chunk.js","mappings":"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","sources":["webpack://pizza-shop-site/./src/components/FullPizzaBlock/FullPizzaBlock.module.scss?ddfd","components/FullPizzaBlock/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"fullpizza\":\"FullPizzaBlock_fullpizza__isCPn\",\"fullpizza__img\":\"FullPizzaBlock_fullpizza__img__QFn4L\",\"fullpizza__content\":\"FullPizzaBlock_fullpizza__content__hv7YI\",\"fullpizza__closeBtn\":\"FullPizzaBlock_fullpizza__closeBtn__0U7NF\",\"fullpizza__information\":\"FullPizzaBlock_fullpizza__information__fsxWp\",\"fullpizza__description\":\"FullPizzaBlock_fullpizza__description__ULjBn\"};","import React from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport styles from \"./FullPizzaBlock.module.scss\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { RootState } from \"../../redux/store\";\r\nimport { doughTypes } from \"../PizzaBlock\";\r\nimport { selectPizzaData } from \"../../redux/cart/selectors\";\r\nimport { addItem } from \"../../redux/cart/slice\";\r\nimport { CartSliceItem } from \"../../redux/cart/types\";\r\nimport { Pizza } from \"../../redux/pizza/types\";\r\nimport { categories } from \"../Categories\";\r\n\r\nconst FullPizzaBlock: React.FC = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const fullPizza = useSelector((state: RootState) =>\r\n    state.pizza.pizzasArr.find((pizza) => pizza.id === Number(id))\r\n  );\r\n  const item = fullPizza as Pizza & { rating: number; category: number };\r\n\r\n  console.log(fullPizza, item);\r\n\r\n  const contentRef = React.useRef<HTMLDivElement>(null);\r\n\r\n  const [activeDoughType, setActiveDoughType] = React.useState(0);\r\n  const [activePizzaSize, setActivePizzaSize] = React.useState(0);\r\n\r\n  const cartItem = useSelector(selectPizzaData(Number(id)));\r\n  const itemCount = cartItem ? cartItem.count : 0;\r\n\r\n  const onClickBody = (event: MouseEvent) => {\r\n    if (\r\n      contentRef.current &&\r\n      !event.composedPath().includes(contentRef.current)\r\n    ) {\r\n      navigate(`/${window.location.search}`);\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (fullPizza) {\r\n      document.body.classList.add(\"fullPizzaActive\");\r\n      document.body.addEventListener(\"click\", onClickBody);\r\n\r\n      return () => {\r\n        document.body.classList.remove(\"fullPizzaActive\");\r\n        document.body.removeEventListener(\"click\", onClickBody);\r\n      };\r\n    } else {\r\n      navigate(`/${window.location.search}`);\r\n    }\r\n  }, []);\r\n\r\n  if (!item) {\r\n    return <></>;\r\n  }\r\n\r\n  const onClickAdd = () => {\r\n    if (item) {\r\n      const pizza: CartSliceItem = {\r\n        id: item.id,\r\n        title: item.title,\r\n        imageUrl: item.imageUrl,\r\n        type: doughTypes[activeDoughType],\r\n        size: item.sizes[activePizzaSize],\r\n        price: item.price,\r\n        count: 1,\r\n      };\r\n\r\n      dispatch(addItem(pizza));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.fullpizza}>\r\n      <div ref={contentRef} className={`${styles.fullpizza__content}`}>\r\n        <div className={styles.fullpizza__closeBtn}>\r\n          <button onClick={() => navigate(`/${window.location.search}`)}>\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              width=\"40\"\r\n              height=\"40\"\r\n              fill=\"#fe5f1e\"\r\n              viewBox=\"0 0 16 16\"\r\n            >\r\n              {\" \"}\r\n              <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"></path>{\" \"}\r\n            </svg>\r\n          </button>\r\n        </div>\r\n        <div className={styles.fullpizza__img}>\r\n          <img width={500} src={item.imageUrl} alt=\"Pizza\" />\r\n        </div>\r\n        <div className={styles.fullpizza__information}>\r\n          <h1>{item.title}</h1>\r\n          <div className={styles.fullpizza__description}>\r\n            <p>Рейтинг: {item.rating} из 10</p>\r\n            <p>Категория: {categories[item.category]}</p>\r\n          </div>\r\n          <div className=\"pizza-block__selector\">\r\n            <ul>\r\n              {item.types.map((type, index) => (\r\n                <li\r\n                  key={type}\r\n                  onClick={() => setActiveDoughType(index)}\r\n                  className={activeDoughType === index ? \"active\" : \"\"}\r\n                >\r\n                  {doughTypes[type]}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n            <ul>\r\n              {item.sizes.map((size, index) => (\r\n                <li\r\n                  key={size}\r\n                  onClick={() => setActivePizzaSize(index)}\r\n                  className={activePizzaSize === index ? \"active\" : \"\"}\r\n                >\r\n                  {size} см.\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n          <div className=\"pizza-block__bottom\">\r\n            <div className=\"pizza-block__price\">от {item.price} ₴</div>\r\n            <button\r\n              onClick={() => onClickAdd()}\r\n              className=\"button button--outline button--add\"\r\n            >\r\n              <svg\r\n                width=\"12\"\r\n                height=\"12\"\r\n                viewBox=\"0 0 12 12\"\r\n                fill=\"none\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n              >\r\n                <path\r\n                  d=\"M10.8 4.8H7.2V1.2C7.2 0.5373 6.6627 0 6 0C5.3373 0 4.8 0.5373 4.8 1.2V4.8H1.2C0.5373 4.8 0 5.3373 0 6C0 6.6627 0.5373 7.2 1.2 7.2H4.8V10.8C4.8 11.4627 5.3373 12 6 12C6.6627 12 7.2 11.4627 7.2 10.8V7.2H10.8C11.4627 7.2 12 6.6627 12 6C12 5.3373 11.4627 4.8 10.8 4.8Z\"\r\n                  fill=\"white\"\r\n                />\r\n              </svg>\r\n              <span>Добавить</span>\r\n              {itemCount > 0 ? <i>{itemCount}</i> : \"\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FullPizzaBlock;\r\n"],"names":["id","useParams","navigate","useNavigate","dispatch","useDispatch","fullPizza","useSelector","state","pizza","pizzasArr","find","Number","item","console","log","contentRef","React","_React$useState","_React$useState2","_slicedToArray","activeDoughType","setActiveDoughType","_React$useState3","_React$useState4","activePizzaSize","setActivePizzaSize","cartItem","selectPizzaData","itemCount","count","onClickBody","event","current","composedPath","includes","concat","window","location","search","document","body","classList","add","addEventListener","remove","removeEventListener","_jsx","_Fragment","className","styles","children","_jsxs","ref","onClick","xmlns","width","height","fill","viewBox","d","src","imageUrl","alt","title","rating","categories","category","types","map","type","index","doughTypes","sizes","size","price","addItem","onClickAdd"],"sourceRoot":""}